---
title: "GitHub Copilot カスタマイズ機能の全体像と使い分け"
emoji: "⚙️"
type: "tech"
topics: ["copilot", "vscode", "ai"]
published: true
---

## はじめに

GitHub Copilotには Skills、Agent、Hooks…と機能がたくさんあり、結局どれをどう設定すればいいのかがわからない人も多いのではないでしょうか。
自分がまさにそうだったので、一度まとめて整理してみました。

:::message

- 本記事の内容はAIで調査し執筆した内容をもとに、私がチェックして整理したものになります。
- 2026/03/01調査時点の内容です
- ファイルパスはMacOS環境の例です
  :::

---

## 全体像

### 機能一覧

| 機能名              | 設定ファイル                             | 設定コマンド     | 主な用途                     |
| ------------------- | ---------------------------------------- | ---------------- | ---------------------------- |
| Custom Instructions | `.github/copilot-instructions.md`        | `/init`          | 全体共通の指示               |
| Instructions        | `.github/instructions/*.instructions.md` | `/instructions`  | 言語・用途別の指示           |
| Prompt Files        | `.github/prompts/*.prompt.md`            | `/prompts`       | 再利用プロンプトテンプレート |
| Custom Agent        | `.github/agents/*.agent.md`              | `/agents`        | カスタム専門ロール           |
| Skills              | `.github/skills/*/SKILL.md`              | `/skills`        | 専門知識・手順書パッケージ   |
| MCP Servers         | `.vscode/mcp.json`                       | `/mcp` (CLIのみ) | 外部ツール・API連携          |
| Hooks               | `.github/hooks/*.json`                   | `/hooks`         | ライフサイクルへの介入       |

### ファイル構造

```
.github/
├── copilot-instructions.md    # 常時適用の全体指示
├── instructions/              # 言語・用途別の指示
│   └── *.instructions.md
├── prompts/                   # 再利用可能なプロンプトテンプレート
│   └── *.prompt.md
├── agents/                    # カスタムエージェント定義
│   └── *.agent.md
├── skills/                    # 専門機能パッケージ
│   └── */
│       └── SKILL.md
└── hooks/                     # イベント駆動スクリプト（フック）
    └── *.json

.vscode*
└── mcp.json                   # 外部ツール連携（MCP）設定
```

### VSCode上での設定へのアクセス

VSCode. CLIともにチャット欄で`/init`, `/instructions`, `/prompts`, `/agents`, `/skills`, `/hooks` と入力すると、それぞれの設定について確認・作成ができます

またVSCodeのCopilot Chatにある歯車アイコンから、一通りの機能設定にアクセスできます。

![設定へのアクセス](/images/github-copilot-settings-access.webp)

## 1. Custom Instructions - 全体共通の指示

> **公式ドキュメント**: https://code.visualstudio.com/docs/copilot/customization/custom-instructions#_use-a-githubcopilot-instructionsmd-file

**役割**: チャットのたびに自動で読み込まれる、プロジェクト全体のルール定義。コーディング規約や技術スタックをここに書いておけば毎回プロンプトで伝える必要がなくなる。

**配置場所**

| スコープ     | パス                                 |
| ------------ | ------------------------------------ |
| 設定コマンド | `/init`                              |
| リポジトリ   | `.github/copilot-instructions.md`    |
| ユーザー     | `~/.copilot/copilot-instructions.md` |

**記述例**

```markdown
# プロジェクト規約

## 技術スタック

- フロントエンド: React + TypeScript
- バックエンド: Node.js + Express
- テスト: Vitest

## 命名規則

- コンポーネント: PascalCase
- 変数・関数: camelCase
- 定数: ALL_CAPS
```

## 2. Instructions - 言語・用途別の指示

> **公式ドキュメント**: https://code.visualstudio.com/docs/copilot/customization/custom-instructions#_use-instructionsmd-files

**役割**: 特定のファイルタイプや用途にだけ適用される指示。Python ファイルを編集中のときだけ Python 規約を読み込む、といった使い方ができる。

**配置場所**

| スコープ     | パス                                                    |
| ------------ | ------------------------------------------------------- |
| 設定コマンド | `/instructions`                                         |
| リポジトリ   | `.github/instructions/*.instructions.md`                |
| ユーザー     | `~/Library/Application Support/Code/User/instructions/` |

**記述例** (`.github/instructions/python.instructions.md`)

```markdown
---
name: "Python 規約"
applyTo: "**/*.py"
---

# Python コーディング規約

- PEP 8 に従う
- 型ヒントを必ず付ける
- パブリック関数には docstring を書く
```

## 3. Prompt Files - 再利用プロンプトテンプレート

> **公式ドキュメント**: https://code.visualstudio.com/docs/copilot/customization/prompt-files

**役割**: 繰り返し使うタスクをファイルに保存し、チャットで `/コマンド名` として呼び出せる。

**配置場所**

| スコープ     | パス                                                          |
| ------------ | ------------------------------------------------------------- |
| 設定コマンド | `/prompts`                                                    |
| リポジトリ   | `.github/prompts/*.prompt.md`                                 |
| ユーザー     | `~/Library/Application Support/Code/User/prompts/*.prompt.md` |

**記述例** (`.github/prompts/create-component.prompt.md`)

```markdown
---
name: "create-component"
description: "React コンポーネントを生成する"
mode: "agent"
---

以下の要件で React コンポーネントを作成してください。

- react-hook-form でフォーム管理
- Vitest でテストも生成

対象ファイル: ${fileBasename}
```

チャットで `/create-component` と入力するだけで呼び出せる。

## 4. Custom Agent - カスタム専門ロール

> **公式ドキュメント**: https://code.visualstudio.com/docs/copilot/customization/custom-agents

**役割**: Agent, Ask, Plan 以外のロールを持つ AI エージェントを定義する。セキュリティレビュー専門、ドキュメント作成専門など、用途に特化したエージェントを作れる。

**配置場所**

| スコープ     | パス                                                        |
| ------------ | ----------------------------------------------------------- |
| 設定コマンド | `/agents`                                                   |
| リポジトリ   | `.github/agents/*.agent.md`                                 |
| ユーザー     | `~/Library/Application Support/Code/User/agents/*.agent.md` |

**記述例** (`.github/agents/security-reviewer.agent.md`)

```markdown
---
name: "Security Reviewer"
description: "セキュリティレビュー専門エージェント"
tools: ["search", "read"]
---

あなたはセキュリティ専門のコードレビュアーです。
以下の観点でレビューしてください:

- SQL インジェクション
- XSS 脆弱性
- 機密情報のハードコーディング
```

## 5. Skills - 専門知識・手順書パッケージ

> **公式ドキュメント**: https://code.visualstudio.com/docs/copilot/customization/agent-skills

**役割**: 複数ファイルをまとめた「専門機能パッケージ」。プロンプト内容に応じて AI が自動で関連スキルを呼び出す。チャットで `/スキル名` として手動呼び出しも可能。

**配置場所**

| スコープ     | パス                           |
| ------------ | ------------------------------ |
| 設定コマンド | `/skills`                      |
| リポジトリ   | `.github/skills/*/SKILL.md`    |
| ユーザー     | `~/.copilot/skills/*/SKILL.md` |

**記述例** (`.github/skills/webapp-testing/SKILL.md`)

```markdown
---
name: webapp-testing
description: >
  Playwright を使った Web アプリのテスト作成ガイド。
  テスト作成を求められたときに使用。
user-invokable: true
---

# Playwright テストガイド

- テストは tests/ フォルダに配置
- page.getByRole() でセレクタを書く
- 非同期処理は await を使う
```

## 6. MCP Servers - 外部ツール・API連携

> **公式ドキュメント**: https://code.visualstudio.com/docs/copilot/customization/mcp-servers

**役割**: AI が外部ツール（ファイル操作・Web 検索・DB など）を使えるようにする設定ファイル。Agent モードでのタスク実行時に活用される。

**配置場所**

| スコープ     | パス                                                                  |
| ------------ | --------------------------------------------------------------------- |
| 設定コマンド | CLI: `/mcp`, VSCode: `チャット欄下部のConfigure Tools...ボタン`       |
| リポジトリ   | `.vscode/mcp.json` ※ Copilot CLIの場合 v0.0.407以降でないと認識しない |
| ユーザー     | `~/.copilot/mcp-config.json`                                          |

**記述例** (`.vscode/mcp.json`)

```json
{
  // API キーが必要なサーバーは `inputs` で安全に管理できる（VSCodeのみ）:
  "inputs": [
    {
      "type": "promptString",
      "id": "api-key",
      "description": "API Key",
      "password": true
    }
  ],
  // ~/.copilot/mcp-config.jsonの場合は"mcpServers"というキーになる
  "servers": {
    "filesystem": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "${workspaceFolder}"
      ]
    },
    "github": {
      "type": "http",
      "url": "https://api.githubcopilot.com/mcp"
    }
  }
}
```

## 7. Hooks - ライフサイクルへの介入

> **公式ドキュメント**: https://code.visualstudio.com/docs/copilot/customization/hooks

**役割**: セッションの開始・終了、ツール実行の前後などのイベントに応じてカスタムシェルコマンドを自動実行する仕組み。

**配置場所**

| スコープ     | パス                        |
| ------------ | --------------------------- |
| 設定コマンド | VS Code チャットで `/hooks` |
| リポジトリ   | `.github/hooks/*.json`      |
| ユーザー     | 非対応                      |

**フックタイプ一覧**

| フックタイプ          | 発火タイミング             | 主な用途                         |
| --------------------- | -------------------------- | -------------------------------- |
| `sessionStart`        | セッション開始・再開時     | 環境初期化、セッションログ       |
| `sessionEnd`          | セッション完了・終了時     | クリーンアップ、レポート生成     |
| `userPromptSubmitted` | ユーザーがプロンプト送信時 | リクエストログ、利用状況分析     |
| `preToolUse`          | ツール実行**前**           | 危険コマンドのブロック、承認要求 |
| `postToolUse`         | ツール実行**後**           | 監査証跡、フォーマッター実行     |
| `errorOccurred`       | エラー発生時               | エラーログ、通知                 |

※調べきれてないですが、VSCodeとCLIで利用できるフックタイプ差分があるようです

**記述例** (`.github/hooks/hooks.json`)

```json
{
  "version": 1,
  "hooks": {
    "sessionStart": [
      {
        "type": "command",
        "bash": "echo \"Session started: $(date)\" >> logs/session.log",
        "cwd": ".",
        "timeoutSec": 10
      }
    ]
  }
}
```

## 補足. VSCode の Copilot 関連設定

> **公式ドキュメント**: https://code.visualstudio.com/docs/copilot/reference/copilot-settings

VS Code の設定（`settings.json` または設定 UI）で変更できる主要な Copilot 設定をカテゴリ別にまとめた。
詳細項目は公式ドキュメント参照

**配置場所**

| スコープ     | パス                                                       |
| ------------ | ---------------------------------------------------------- |
| 設定コマンド | コマンドパレット: `Preferences: Open User Settings (JSON)` |
| リポジトリ   | `.vscode/settings.json`                                    |
| ユーザー     | `~/Library/Application Support/Code/User/settings.json`    |

### Agentを自律的に動かすのに重要な設定を抜粋

| 設定キー                                | 説明                                                     | デフォルト             |
| --------------------------------------- | -------------------------------------------------------- | ---------------------- |
| `chat.agent.maxRequests`                | エージェントが実行できる最大リクエスト数                 | `25`                   |
| `chat.tools.terminal.autoApprove`       | 自動承認するターミナルコマンドを制御する（正規表現も可） | `{ "rm": false, ... }` |
| `chat.tools.terminal.enableAutoApprove` | ターミナルコマンドの自動承認機能を有効にする             | `true`                 |
| `chat.tools.global.autoApprove`         | 全ツールを自動承認する（セキュリティリスクあり）         | `false`                |

---

## まとめ

以下の順で導入を進めていくといいと思います。
設定が多すぎるとコンテキストウィンドウを圧迫するので、本当に必要なものに絞ることも大事です。

1. Custom Instructions から始める
   - `/init` コマンドで雛形を生成し、プロジェクトの技術スタックや規約を記述する
   - これだけでも Copilot の出力品質が大きく変わる

2. Instructions で言語やディレクトリ別のルールを追加する
   - 複数言語を扱うプロジェクトでは特に効果的

3. Skills で繰り返し作業や専門スキルを定型化する
   - 定型作業、コンポーネント生成、テスト作成、といった特定用途のスキルを自動化する

4. Custom Agent で専門エージェントを定義する
   - レビューやドキュメント生成など、特定用途に特化させると精度が向上する

5. MCP Servers / Hooks で外部連携・自動化を組み込む
   - プロジェクトの成熟度に応じて段階的に導入する

また設定ファイルはリポジトリにコミットしてチーム全体で共有することで、開発品質の底上げにつながります。
個人の好みの部分はユーザースコープで管理しましょう。
